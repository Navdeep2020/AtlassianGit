<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIRA Assignee and Time Spent</title>
</head>
<body>
    <h1>JIRA Worklog Details</h1>
    <ul id="teamList">
        <!-- List will be populated here -->
    </ul>

    <script>
        // Variables to store data
        let name = [];
        let timeSpent = [];

        // Function to fetch data from JSON and store in variables
        function fetchData() {
            fetch('response.json')
                .then(response => response.json())
                .then(data => {
                    // Clear previous data
                    name = [];
                    timeSpent = [];

                    // Extract data and store in variables
                    data.issues.forEach(issue => {
                        const assignee = issue.fields.assignee?.name || "Unassigned";
                        const worklogs = issue.fields.worklog?.worklogs.timeSpent || [];
                        

                        name.push(assignee);
                        timeSpent.push(worklogs);
                    });

                    // Call function to update HTML
                    updateHTML();
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Function to update HTML with data
        function updateHTML() {
            const teamList = document.getElementById('teamList');
            teamList.innerHTML = ''; // Clear previous entries

            name.forEach((person, index) => {
                const listItem = document.createElement('li');
                listItem.textContent = `Name: ${person}, Time Spent: ${timeSpent[index]}h`;
                teamList.appendChild(listItem);
            });
        }

        // Call fetchData when the screen loads
        window.onload = fetchData;
    </script>
</body>
</html>
